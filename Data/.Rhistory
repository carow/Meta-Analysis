<<<<<<< Updated upstream
=======
=======
birds=table1[taxon=="b",-c(5,6,7,8,9,10,11,12,13)]
detach(table1)
attach(birds)
attach(birds)
es = escalc(measure = "SMD", m1i = d.mean, sd1i = d.sd, n1i = d.n, m2i = p.mean, sd2i = p.sd, n2i = p.n, data=birds)
detach(birds)
attach(birds)
rma.he = rma(method="HE", m1i = d.mean, sd1i = d.sd, n1i = d.n, m2i = p.mean, sd2i = p.sd, n2i = p.n, measure = "SMD", data=birds)
print(rma.he)
detach(birds)
attach(es)
result.he = rma(yi=yi, vi=vi, method ="HE")
result.he
summary(result.he)
detach(es)
#Plot for study contributions to the effect size
contributions <- 1/rma.he$vi/sum(1/rma.he$vi) * 100
cbind(contributions)
barplot(contributions)
#Get Between-Study Variance & Its Error
rma.he$tau2 + 1.96 * c(-1, 1) * rma.he$se.tau2 #95% CI
# I2, mean differences
# Interpretation = Percentage of "unexplained" variance
I2 <- with(rma.he, (QE - (k - 1))/QE * 100)
I2
# Thresholds For I 2
# 0% to 30% → Low
# 30% to 60% → Moderate
# 50% to 90% → Substantial
# 75% to 100% → Considerable
# Forest plot for our model:
forest.rma(rma.he, order = "prec", showweight=T) # DEFAULT PLOT
attach(birds)
library(compute.es)
#mes2 from the package compute.es
SDpooled = sqrt(((p.n-1)*p.sd^2+(d.n-1)*d.sd^2)/(p.n+d.n-2))
str(SDpooled)
effectsizesWhole=mes2(m.1=p.mean, m.2= d.mean,s.pooled=SDpooled, n.1=p.n, n.2=d.n)
detach(birds)
attach(effectsizes)
res <- rma(yi=g, vi=var.g, method="DL")
res
detach(effectsizes)
attach(effectsizes)
value <- fsn(y = g, v = var.g)
value
funnel(value <- fsn(y = g, v = var.g))
detach(effectsizes)
attach(effectsizes)
res.rd <- rma(yi=g, vi=var.g, method="DL",
measure = "RD",) # Risk Differences
trimfill(res.rd) # Only applicable for FE or RE objects
funnel(trimfill(res.rd))
detach(effectsizes)
detach(table1)
detach(birds)
detach(birds)
detach(es)
detach(es)
detach(birds)
detach(effectsizes)
detach(effectsizes)
#setwd("C:/Users/ICI/Desktop/MetaAnalysisD")
setwd("/Users/Torfinn/Documents/Uni Freiburg/Best Practice R/Meta-Analysis/Data")
table1 <- read.csv2("Gibson.csv")
str(table1)
summary(table1)
table1$d.mean=as.numeric(table1$d.mean)
table1$p.mean=as.numeric(table1$p.mean)
table1$p.sd=as.numeric(table1$p.sd)
table1$d.sd=as.numeric(table1$d.sd)
table1$hedges.g.=as.numeric(table1$hedges.g)
attach(table1)
birds=table1[taxon=="b",-c(5,6,7,8,9,10,11,12,13)]
detach(table1)
attach(birds)
es = escalc(measure = "SMD", m1i = d.mean, sd1i = d.sd, n1i = d.n, m2i = p.mean, sd2i = p.sd, n2i = p.n, data=birds)
detach(birds)
attach(birds)
rma.he = rma(method="HE", m1i = d.mean, sd1i = d.sd, n1i = d.n, m2i = p.mean, sd2i = p.sd, n2i = p.n, measure = "SMD", data=birds)
print(rma.he)
detach(birds)
attach(es)
result.he = rma(yi=yi, vi=vi, method ="HE")
result.he
summary(result.he)
detach(es)
#Plot for study contributions to the effect size
contributions <- 1/rma.he$vi/sum(1/rma.he$vi) * 100
cbind(contributions)
barplot(contributions)
#Get Between-Study Variance & Its Error
rma.he$tau2 + 1.96 * c(-1, 1) * rma.he$se.tau2 #95% CI
# I2, mean differences
# Interpretation = Percentage of "unexplained" variance
I2 <- with(rma.he, (QE - (k - 1))/QE * 100)
I2
# Thresholds For I 2
# 0% to 30% → Low
# 30% to 60% → Moderate
# 50% to 90% → Substantial
# 75% to 100% → Considerable
# Forest plot for our model:
forest.rma(rma.he, order = "prec", showweight=T) # DEFAULT PLOT
attach(birds)
>>>>>>> origin/master
library(compute.es)
#mes2 from the package compute.es
SDpooled = sqrt(((p.n-1)*p.sd^2+(d.n-1)*d.sd^2)/(p.n+d.n-2))
str(SDpooled)
effectsizes=mes2(m.1=p.mean, m.2= d.mean,s.pooled=SDpooled, n.1=p.n, n.2=d.n)
<<<<<<< HEAD
View(effectsizes)
detach(birds)
setwd("C:/Users/ICI/Documents/Carolina/Uni/Freiburg/3_Semester/Best practice R/Meta Analysis/Data")
View(birds)
>>>>>>> Stashed changes
View(effectsizes)
attach(effetsizes)
=======
detach(birds)
attach(effectsizes)
res <- rma(yi=g, vi=var.g, method="DL")
res
detach(effectsizes)
attach(effectsizes)
value <- fsn(y = g, v = var.g)
value
funnel(value <- fsn(y = g, v = var.g))
detach(effectsizes)
attach(effectsizes)
res.rd <- rma(yi=g, vi=var.g, method="DL",
measure = "RD",) # Risk Differences
trimfill(res.rd) # Only applicable for FE or RE objects
funnel(trimfill(res.rd))
detach(effectsizes)
#setwd("C:/Users/ICI/Desktop/MetaAnalysisD")
setwd("/Users/Torfinn/Documents/Uni Freiburg/Best Practice R/Meta-Analysis/Data")
>>>>>>> origin/master
table1 <- read.csv2("Gibson.csv")
str(table1)
summary(table1)
table1$d.mean=as.numeric(table1$d.mean)
table1$p.mean=as.numeric(table1$p.mean)
table1$p.sd=as.numeric(table1$p.sd)
table1$d.sd=as.numeric(table1$d.sd)
table1$hedges.g.=as.numeric(table1$hedges.g)
attach(table1)
birds=table1[taxon=="b",-c(5,6,7,8,9,10,11,12,13)]
detach(table1)
attach(birds)
<<<<<<< HEAD
=======
es = escalc(measure = "SMD", m1i = d.mean, sd1i = d.sd, n1i = d.n, m2i = p.mean, sd2i = p.sd, n2i = p.n, data=birds)
detach(birds)
attach(birds)
rma.he = rma(method="HE", m1i = d.mean, sd1i = d.sd, n1i = d.n, m2i = p.mean, sd2i = p.sd, n2i = p.n, measure = "SMD", data=birds)
print(rma.he)
detach(birds)
attach(es)
result.he = rma(yi=yi, vi=vi, method ="HE")
result.he
summary(result.he)
detach(es)
#Plot for study contributions to the effect size
contributions <- 1/rma.he$vi/sum(1/rma.he$vi) * 100
cbind(contributions)
barplot(contributions)
#Get Between-Study Variance & Its Error
rma.he$tau2 + 1.96 * c(-1, 1) * rma.he$se.tau2 #95% CI
# I2, mean differences
# Interpretation = Percentage of "unexplained" variance
I2 <- with(rma.he, (QE - (k - 1))/QE * 100)
I2
# Thresholds For I 2
# 0% to 30% → Low
# 30% to 60% → Moderate
# 50% to 90% → Substantial
# 75% to 100% → Considerable
# Forest plot for our model:
forest.rma(rma.he, order = "prec", showweight=T) # DEFAULT PLOT
attach(birds)
>>>>>>> origin/master
library(compute.es)
#mes2 from the package compute.es
SDpooled = sqrt(((p.n-1)*p.sd^2+(d.n-1)*d.sd^2)/(p.n+d.n-2))
str(SDpooled)
effectsizes=mes2(m.1=p.mean, m.2= d.mean,s.pooled=SDpooled, n.1=p.n, n.2=d.n)
detach(birds)
<<<<<<< HEAD
attach(effetsizes)
attach(effectsizes)
ram(yi = g, vi = var.g)
rma(yi = g, vi = var.g)
rma(yi = g, vi = var.g, method = "DL")
res = rma(yi = g, vi = var.g, method = "DL")
res
forest(res)
forest.rma(res)
forest.rma(res, annotate=TRUE)
forest.rma(res, annotate=TRUE, refline= 0, x-lab= "Forest Plot Birds")
forest.rma(res, annotate=TRUE, refline= 0, x.lab= "Forest Plot Birds")
funnel(res)
ranktest(res)
regtest(res)
=======
attach(effectsizes)
res <- rma(yi=g, vi=var.g, method="DL")
res
detach(effectsizes)
attach(effectsizes)
value <- fsn(y = g, v = var.g)
value
funnel(value <- fsn(y = g, v = var.g))
detach(effectsizes)
attach(effectsizes)
res.rd <- rma(yi=g, vi=var.g, method="DL",
measure = "RD",) # Risk Differences
trimfill(res.rd) # Only applicable for FE or RE objects
funnel(trimfill(res.rd))
detach(effectsizes)
attach(effectsizes)
value <- fsn(y = g, v = var.g)
value
detach(effectsizes)
attach(effectsizes)
res.rd <- rma(yi=g, vi=var.g, method="DL",
measure = "RD",) # Risk Differences
trimfill(res.rd) # Only applicable for FE or RE objects
funnel(trimfill(res.rd))
detach(effectsizes)
>>>>>>> origin/master
res1 = rma(yi =effectsizes$g, vi = effectsizes$var.g, method = "DL",  slab=paste(birds$studyID))
library(metafor)
res1 = rma(yi = g, vi = var.g, method = "DL")
attach(effectsizes)
res1 = rma(yi = g, vi = var.g, method = "DL")
res
detach(effectsizes)
res1 = rma(yi =effectsizes$g, vi = effectsizes$var.g, method = "DL",  slab=paste(birds$studyID))
forest.rma(res1, annotate=TRUE, cex=0.5 )
forest.rma(res1, annotate=TRUE, cex=0.5 )
res1 = rma(yi =effectsizes$g, vi = effectsizes$var.g, method = "DL",  slab=paste(birds$studyID))
funnel(res)
regtest(res)
fsn(yi=g, vi=var.g, data=effectsizes)#By default the Rosentahl Approach "file drawer analysis"
#setwd("C:/Users/ICI/Desktop/MetaAnalysisD")
setwd("/Users/Torfinn/Documents/Uni Freiburg/Best Practice R/Meta-Analysis/Data")
table1 <- read.csv2("Gibson.csv")
str(table1)
summary(table1)
table1$d.mean=as.numeric(table1$d.mean)
table1$p.mean=as.numeric(table1$p.mean)
table1$p.sd=as.numeric(table1$p.sd)
table1$d.sd=as.numeric(table1$d.sd)
table1$hedges.g.=as.numeric(table1$hedges.g)
attach(table1)
birds=table1[taxon=="b",-c(5,6,7,8,9,10,11,12,13)]
detach(table1)
attach(birds)
es = escalc(measure = "SMD", m1i = d.mean, sd1i = d.sd, n1i = d.n, m2i = p.mean, sd2i = p.sd, n2i = p.n, data=birds)
detach(birds)
attach(birds)
rma.he = rma(method="HE", m1i = d.mean, sd1i = d.sd, n1i = d.n, m2i = p.mean, sd2i = p.sd, n2i = p.n, measure = "SMD", data=birds)
print(rma.he)
detach(birds)
attach(es)
result.he = rma(yi=yi, vi=vi, method ="HE")
result.he
summary(result.he)
detach(es)
View(birds)
stratified <- function(df, group, size, select = NULL,
library(devtools)
library(devtools)
install.packages(devtools)
install.packages("devtools")
library(devtools)
stratified <- function(df, group, size, select = NULL,
library(devtools)
library(devtools)
source_gist("https://gist.github.com/mrdwab/6424112")
View(birds)
set.seed(100)
birdsnew = stratified(birds, "study.ID", 1)
birdsnew
summary(birdsnew)
attach(birdsnew)
rma.he = rma(method="HE", m1i = d.mean, sd1i = d.sd, n1i = d.n, m2i = p.mean, sd2i = p.sd, n2i = p.n, measure = "SMD", data=birdsnew)
print(rma.he)
detach(birdsnew)
detach(birdsnew)
contributions <- 1/rma.he$vi/sum(1/rma.he$vi) * 100
cbind(contributions)
barplot(contributions)
rma.he$tau2 + 1.96 * c(-1, 1) * rma.he$se.tau2 #95% CI
I2 <- with(rma.he, (QE - (k - 1))/QE * 100)
I2
forest.rma(rma.he, order = "prec", showweight=T) # DEFAULT PLOT
forest.rma(rma.he, showweight=T) # DEFAULT PLOT
forest.rma(rma.he, showweight=T, refline=RE Model) # DEFAULT PLOT
forest.rma(rma.he, showweight=T, refline="NA") # DEFAULT PLOT
forest.rma(rma.he, showweight=T, refline=1) # DEFAULT PLOT
forest.rma(rma.he, showweight=T, refline=0,29) # DEFAULT PLOT
forest.rma(rma.he, showweight=T, refline=0.29) # DEFAULT PLOT
funnel(rma.he)
View(es)
rma.he = rma(method="HE", m1i = d.mean, sd1i = d.sd, n1i = d.n,
print(rma.he)
rma.he
rma.he
View(birds)
View(birdsnew)
View(table1)
attach(table1)
mean(d.mean)
mean(p.mean)
View(birds)
attach(birdsnew)
rma.he = rma(method="HE", m1i = p.mean, sd1i = p.sd, n1i = p.n,
rma.he
detach(birdsnew)
detach(birdsnew)
detach(birdsnew)
rma.he
forest.rma(rma.he, showweight=T, refline=0.29) # DEFAULT PLOT
contributions <- 1/rma.he$vi/sum(1/rma.he$vi) * 100
cbind(contributions)
barplot(contributions)
rma.he$tau2 + 1.96 * c(-1, 1) * rma.he$se.tau2 #95% CI
I2 <- with(rma.he, (QE - (k - 1))/QE * 100)
I2
rma.he
funnel(rma.he)
table1 <- read.csv2("Gibson.csv")
table1$d.mean=as.numeric(table1$d.mean)
table1$p.mean=as.numeric(table1$p.mean)
table1$p.sd=as.numeric(table1$p.sd)
table1$d.sd=as.numeric(table1$d.sd)
table1$hedges.g.=as.numeric(table1$hedges.g)
attach(table1)
birds=table1[taxon=="b",-c(5,6,7,8,9,10,11,12,13)]
detach(table1)
detach(table1)
detach(table1)
library(devtools)
source_gist("https://gist.github.com/mrdwab/6424112")
set.seed(100)
birdsnew = stratified(birds, "study.ID", 1)
summary(birdsnew)
rma.he = rma(method="HE", m1i = p.mean, sd1i = p.sd, n1i = p.n,
rma.he
m2i = d.mean, sd2i = d.sd, n2i =d.n, measure = "SMD",
attach(birdsnew)
rma.he = rma(method="HE", m1i = p.mean, sd1i = p.sd, n1i = p.n,
m2i = d.mean, sd2i = d.sd, n2i =d.n, measure = "SMD",
data=birdsnew)
rma.he
detach(birdsnew)
detach(birdsnew)
forest.rma(rma.he, showweight=T, refline=0.29) # DEFAULT PLOT
forest.rma(rma.he, showweight=T) # DEFAULT PLOT
forest.rma(rma.he, showweight=T, cex=0.8, cex.lab=0.8, cex.axis=0.8) # DEFAULT PLOT
forest.rma(rma.he, showweight=T) # DEFAULT PLOT
forest.rma(rma.he, showweight=T,  psize=1, cex=0.8, cex.lab=0.8, cex.axis=0.8) # DEFAULT PLOT
forest.rma(rma.he, showweight=T, cex.lab=0.8, cex.axis=0.8) # DEFAULT PLOT
forest.rma(rma.he, showweight=T, cex=0.8,  cex.lab=0.8, cex.axis=0.8) # DEFAULT PLOT
forest.rma(rma.he, showweight=T, cex=0.5,  cex.lab=0.8, cex.axis=0.8) # DEFAULT PLOT
forest.rma(rma.he, showweight=T, cex=0.6,  cex.lab=0.8, cex.axis=0.8) # DEFAULT PLOT
forest.rma(rma.he, showweight=T, cex=05,  cex.lab=0.8, cex.axis=0.8) # DEFAULT PLOT
forest.rma(rma.he, showweight=T, cex=0.5,  cex.lab=0.8, cex.axis=0.8) # DEFAULT PLOT
forest.rma(rma.he, showweight=T, cex=0.5, cex.axis=0.7) # DEFAULT PLOT
forest.rma(rma.he, showweight=T, cex=0.5) # DEFAULT PLOT
View(birdsnew)
forest.rma(rma.he, showweight=T, cex=0.5, ilab= cbind(p.n+d.n)) # DEFAULT PLOT
forest.rma(rma.he, showweight=T, cex=0.5, ilab= cbind(birdsnew$p.n+birdsnew$d.n)) # DEFAULT PLOT
forest.rma(rma.he, showweight=T, cex=0.5, ilab= cbind(birdsnew$p.n+birdsnew$d.n), ilab.expos = rma.he) # DEFAULT PLOT
forest.rma(rma.he, showweight=T, cex=0.5, ilab=birdsnew$p.n, ilab.expos = rma.he) # DEFAULT PLOT
forest.rma(rma.he, showweight=T, cex=0.5, ilab=birdsnew$p.n, ilab.expos = rma.he-1) # DEFAULT PLOT
forest.rma(rma.he, showweight=T, cex=0.5, ilab=ni, ilab.expos = rma.he-1) # DEFAULT PLOT
rma.he
rma.he$ni
forest.rma(rma.he, showweight=T, cex=0.5, ilab=rma.he$ni, ilab.expos = rma.he-1) # DEFAULT PLOT
forest.rma(rma.he, showweight=T, cex=0.5, ilab=rma.he$ni, ilab.expos = rma.he) # DEFAULT PLOT
forest.rma(rma.he, showweight=T, cex=0.5, ilab=rma.he$ni, ilab.expos = -2,5) # DEFAULT PLOT
forest.rma(rma.he, showweight=T, cex=0.5) # DEFAULT PLOT
warnings()
forest.rma(rma.he, showweight=T, cex=0.5) # DEFAULT PLOT
sens.RE = leave1out(rma.RE)
which(sens.RE$I2 == min(sens.RE$I2))
sum(sens.RE$I2 < 30)
sens.RE = leave1out(rma.re)
sens.RE = leave1out(rma.he)
rma.RE.meta = rma(method = "REML", measure = "SMD", m1i = p.mean, m2i = d.mean, sd1i = p.sd, sd2i = d.sd, n1i = p.n, n2i = d.n, vtype = "UB", mods = ~ continent)
attach(birdsnew)
rma.RE.meta = rma(method = "REML", measure = "SMD", m1i = p.mean, m2i = d.mean, sd1i = p.sd, sd2i = d.sd, n1i = p.n, n2i = d.n, vtype = "UB", mods = ~ continent)
rma.FE.meta = rma(method = "FE", measure = "SMD", m1i = p.mean, m2i = d.mean, sd1i = p.sd, sd2i = d.sd, n1i = p.n, n2i = d.n, vtype = "UB", mods = ~ continent)
sens.RE = leave1out(rma.FE)
sens.RE = leave1out(rma.FE.meta)
sens.RE = leave1out(rma.he)
which(sens.RE$I2 == min(sens.RE$I2))
sum(sens.RE$I2 < 30)
sum(sens.RE$I2 < 25)
sum(sens.RE$I2 < 10)
plot(sens.RE$I2)
hist(sens.RE$I2)
count(sens.RE$I2)
sens.RE = leave1out(rma.he)
which(sens.RE$I2 == min(sens.RE$I2))
sum(sens.RE$I2 < 25)
hist(sens.RE$I2)
cbind(exp(sens.RE$estimate), sens.RE$pval < 0.05)
sens$RE$I2
sens.RE$I2
library(metafor)
table1 <- read.csv2("Gibson.csv")
str(table1)
summary(table1)
table1$d.mean=as.numeric(table1$d.mean)
table1$p.mean=as.numeric(table1$p.mean)
table1$p.sd=as.numeric(table1$p.sd)
table1$d.sd=as.numeric(table1$d.sd)
table1$hedges.g.=as.numeric(table1$hedges.g)
attach(table1)
birds=table1[taxon=="b",-c(5,6,7,8,9,10,11,12,13)]
detach(table1)
# To select randomly one row per study to narrow down the metaanalysis.
library(devtools)
source_gist("https://gist.github.com/mrdwab/6424112")
set.seed(100)
birdsnew = stratified(birds, "study.ID", 1)
summary(birdsnew)
attach(birdsnew)
#Fixed Effect Model
rma.FE = rma(method = "FE", measure = "SMD", m1i = p.mean, m2i = d.mean, sd1i = p.sd, sd2i = d.sd, n1i = p.n, n2i = d.n, vtype = "UB")
rma.FE
#Random Effects Model
rma.RE = rma(method = "REML", measure = "SMD", m1i = p.mean, m2i = d.mean, sd1i = p.sd, sd2i = d.sd, n1i = p.n, n2i = d.n, vtype = "UB")# maybe change vtype and method
rma.RE
detach(birdsnew)
forest.rma (rma.FE, annotate = TRUE, cex = 0.5, showweight = TRUE) #FE model
forest.rma(rma.RE, annotate = TRUE, cex = 0.5, showweight = TRUE) #RE model
#Causes of heterogeneity - Meta-regression p. 141
attach(birdsnew)
rma.FE.meta = rma(method = "FE", measure = "SMD", m1i = p.mean, m2i = d.mean, sd1i = p.sd, sd2i = d.sd, n1i = p.n, n2i = d.n, vtype = "UB", mods = ~ continent)
rma.FE.meta
#Random Effects Model
rma.RE.meta = rma(method = "REML", measure = "SMD", m1i = p.mean, m2i = d.mean, sd1i = p.sd, sd2i = d.sd, n1i = p.n, n2i = d.n, vtype = "UB", mods = ~ continent)
rma.RE.meta
detach(birdsnew)
##publication bias testing
funnel(rma.FE)
regtest(rma.FE)#analysing the asymmetry of the funnel plot
funnel(rma.RE)
regtest(rma.RE, model = "rma", predictor = "sei")
#-- Fail safe n method
fsn(yi = rma.FE$yi, vi = rma.FE$vi)#"file drawer analysis"
fsn(yi = rma.RE$yi, vi = rma.RE$vi)
# -- Trim fill method
attach(birdsnew)
rma.TF <- rma( method="DL", measure = "RD",m1i = p.mean, m2i = d.mean, sd1i = p.sd, sd2i = d.sd, n1i = p.n, n2i = d.n) # Risk Differences
trimfill(rma.RE) # Only applicable for FE or RE objects
funnel(trimfill(rma.RE))
detach(birdsnew)
#sensitivity analysis/robustness testing
#-- with the leaveout function
sens.RE = leave1out(rma.he)
which(sens.RE$I2 == min(sens.RE$I2))
sum(sens.RE$I2 < 25)
hist(sens.RE$I2)
cbind(exp(sens.RE$estimate), sens.RE$pval < 0.05)
sens.RE$I2
sens.RE = leave1out(rma.RE)
which(sens.RE$I2 == min(sens.RE$I2))
sum(sens.RE$I2 < 25)
hist(sens.RE$I2)
cbind(exp(sens.RE$estimate), sens.RE$pval < 0.05)
sens.RE$I2
detach(birdsnew)
detach(birdsnew)
attach(birdsnew)
rma.TF <- rma( method="DL", measure = "RD",m1i = p.mean, m2i = d.mean, sd1i = p.sd, sd2i = d.sd, n1i = p.n, n2i = d.n) # Risk Differences
funnel(rma.FE)
regtest(rma.FE)#analysing the asymmetry of the funnel plot
funnel(rma.RE)
regtest(rma.RE, model = "rma", predictor = "sei")
fsn(yi = rma.FE$yi, vi = rma.FE$vi)#"file drawer analysis"
fsn(yi = rma.RE$yi, vi = rma.RE$vi)
trimfill(rma.RE) # Only applicable for FE or RE objects
detach(birdsnew)
detach(birdsnew)
attach(table1)
rma.TF <- rma( method="DL", measure = "RD",m1i = p.mean, m2i = d.mean, sd1i = p.sd, sd2i = d.sd, n1i = p.n, n2i = d.n) # Risk Differences
rma.TF <- rma(method="HE", measure = "SMD", m1i = p.mean, m2i = d.mean, sd1i = p.sd, sd2i = d.sd, n1i = p.n, n2i = d.n) # Risk Differences
trimfill(rma.TF) # Only applicable for FE or RE objects
funnel(trimfill(rma.RE))
funnel(trimfill(rma.TF))
attach(birdsnew)
<<<<<<< Updated upstream
funnel(trimfill(rma.RE))
attach(birdsnew)
rma.TF <- rma( method ="DL", measure = "RD",m1i = p.mean, m2i = d.mean, sd1i = p.sd, sd2i = d.sd, n1i = p.n, n2i = d.n) # Risk Differences
trimfill(rma.RE) # Only applicable for FE or RE objects
library(metafor)
table1 <- read.csv2("Gibson.csv")
str(table1)
summary(table1)
table1$d.mean=as.numeric(table1$d.mean)
table1$p.mean=as.numeric(table1$p.mean)
table1$p.sd=as.numeric(table1$p.sd)
table1$d.sd=as.numeric(table1$d.sd)
table1$hedges.g.=as.numeric(table1$hedges.g)
attach(table1)
birds=table1[taxon=="b",-c(5,6,7,8,9,10,11,12,13)]
detach(table1)
library(devtools)
source_gist("https://gist.github.com/mrdwab/6424112")
set.seed(100)
birdsnew = stratified(birds, "study.ID", 1)
summary(birdsnew)
attach(birdsnew)
library(metafor)
table1 <- read.csv2("Gibson.csv")
str(table1)
summary(table1)
table1$d.mean=as.numeric(table1$d.mean)
table1$p.mean=as.numeric(table1$p.mean)
table1$p.sd=as.numeric(table1$p.sd)
table1$d.sd=as.numeric(table1$d.sd)
table1$hedges.g.=as.numeric(table1$hedges.g)
attach(table1)
birds=table1[taxon=="b",-c(5,6,7,8,9,10,11,12,13)]
detach(table1)
# To select randomly one row per study to narrow down the metaanalysis.
library(devtools)
library(devtools)
source_gist("https://gist.github.com/mrdwab/6424112")
install.packages("devtools")
set.seed(100)
birdsnew = stratified(birds, "study.ID", 1)
summary(birdsnew)
attach(birdsnew)
library(devtools)
install.packages("devtools")
library(devtools)
find_rtools()
find_rtools()
library(devtools)
source_gist("https://gist.github.com/mrdwab/6424112")
set.seed(100)
birdsnew = stratified(birds, "study.ID", 1)
summary(birdsnew)
attach(birdsnew)
#Fixed Effect Model
rma.FE = rma(method = "FE", measure = "SMD", m1i = p.mean, m2i = d.mean, sd1i = p.sd, sd2i = d.sd, n1i = p.n, n2i = d.n, vtype = "UB")
rma.FE
library(metafor)
table1 <- read.csv2("Gibson.csv")
str(table1)
summary(table1)
table1$d.mean=as.numeric(table1$d.mean)
table1$p.mean=as.numeric(table1$p.mean)
table1$p.sd=as.numeric(table1$p.sd)
table1$d.sd=as.numeric(table1$d.sd)
table1$hedges.g.=as.numeric(table1$hedges.g)
attach(table1)
birds=table1[taxon=="b",-c(5,6,7,8,9,10,11,12,13)]
detach(table1)
# To select randomly one row per study to narrow down the metaanalysis.
library(devtools)
source_gist("https://gist.github.com/mrdwab/6424112")
set.seed(100)
birdsnew = stratified(birds, "study.ID", 1)
summary(birdsnew)
attach(birdsnew)
#Fixed Effect Model
rma.FE = rma(method = "FE", measure = "SMD", m1i = p.mean, m2i = d.mean, sd1i = p.sd, sd2i = d.sd, n1i = p.n, n2i = d.n, vtype = "UB")
rma.FE
#Random Effects Model
rma.RE = rma(method = "REML", measure = "SMD", m1i = p.mean, m2i = d.mean, sd1i = p.sd, sd2i = d.sd, n1i = p.n, n2i = d.n, vtype = "UB")# maybe change vtype and method
rma.RE
detach(birdsnew)
forest.rma (rma.FE, annotate = TRUE, cex = 0.5, showweight = TRUE) #FE model
forest.rma(rma.RE, annotate = TRUE, cex = 0.5, showweight = TRUE) #RE model
#Causes of heterogeneity - Meta-regression p. 141
attach(birdsnew)
rma.FE.meta = rma(method = "FE", measure = "SMD", m1i = p.mean, m2i = d.mean, sd1i = p.sd, sd2i = d.sd, n1i = p.n, n2i = d.n, vtype = "UB", mods = ~ continent)
rma.FE.meta
#Random Effects Model
rma.RE.meta = rma(method = "REML", measure = "SMD", m1i = p.mean, m2i = d.mean, sd1i = p.sd, sd2i = d.sd, n1i = p.n, n2i = d.n, vtype = "UB", mods = ~ continent)
rma.RE.meta
detach(birdsnew)
##publication bias testing
funnel(rma.FE)
regtest(rma.FE)#analysing the asymmetry of the funnel plot
funnel(rma.RE)
regtest(rma.RE, model = "rma", predictor = "sei")
#-- Fail safe n method
fsn(yi = rma.FE$yi, vi = rma.FE$vi)#"file drawer analysis"
fsn(yi = rma.RE$yi, vi = rma.RE$vi)
# -- Trim fill method
attach(birdsnew)
rma.TF <- rma( method ="DL", measure = "RD",m1i = p.mean, m2i = d.mean, sd1i = p.sd, sd2i = d.sd, n1i = p.n, n2i = d.n) # Risk Differences
leave1out(rma.FE)
sens.RE = leave1out(rma.RE)
sens.RE
funnel(rma.RE)
regtest(rma.RE, model = "rma", predictor = "sei")
attach(birdsnew)
rma.RE.meta = rma(method = "REML", measure = "SMD", m1i = p.mean, m2i = d.mean, sd1i = p.sd, sd2i = d.sd, n1i = p.n, n2i = d.n, vtype = "UB", mods = ~ continent)
rma.RE.meta
leave1out(rma.FE)
sens.RE = leave1out(rma.RE)
sens.RE = leave1out(rma.RE)
sens.RE
forest.rma(rma.RE, annotate = TRUE, cex = 0.5, showweight = TRUE) #RE model
=======
detach(birdsnew)
detach(birdsnew)
attach(birdsnew)
detach(table1)
detach(table1)
attach(birdsnew)
rma.TF <- rma(method="HE", measure = "SMD", m1i = p.mean, m2i = d.mean, sd1i = p.sd, sd2i = d.sd, n1i = p.n, n2i = d.n) # Risk Differences
trimfill(rma.TF) # Only applicable for FE or RE objects
funnel(trimfill(rma.TF))
rma.TF.REML <- rma(method="REML", measure = "SMD", m1i = p.mean, m2i = d.mean, sd1i = p.sd, sd2i = d.sd, n1i = p.n, n2i = d.n) # Risk Differences
trimfill(rma.TF.REML) # Only applicable for FE or RE objects
rma.TF.FE <- rma(method="FE", measure = "SMD", m1i = p.mean, m2i = d.mean, sd1i = p.sd, sd2i = d.sd, n1i = p.n, n2i = d.n) # Risk Differences
trimfill(rma.TF.FE) # Only applicable for FE or RE objects
funnel(trimfill(rma.TF.FE))
>>>>>>> Stashed changes
